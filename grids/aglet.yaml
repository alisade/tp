---
git2consul:
  git2consul_status: good
admin_ips:
  users:
    hq@cloudpassage.com: 64.124.161.130
    akeller@cloudpassage.com: 76.89.164.115
    zvickery@cloudpassage.com: 159.118.218.84
    jcollier@cloudpassage.com: 173.92.26.196
    trobbins@cloudpassage.com: 67.169.108.148
    aardestani@cloudpassage.com: 47.156.157.5
    alim@cloudpassage.com: 100.33.9.172
    talpert@cloudpassage.com: 34.208.62.171
    aadriasola@cloudpassage.com: 69.42.13.203
    vitaliy@cloudpassage.com: 71.94.73.141
    amansoor@cloudpassage.com:
    vaher@cloudpassage.com:
    tcummings@cloudpassage.com:
    kuga@cloudpassage.com:
    dangal@cloudpassage.com:
    cwardall@cloudpassage.com:
    kjanakiraman@cloudpassage.com:
    jcordova@cloudpassage.com:
    vmanda@cloudpassage.com:

kong:
  REPORTING_API_EXTERNAL_WHITELIST: '10.0.0.0/8'

3rdparty:
  new_relic_license_key: dc7d9326185261dc8f38bdbd11db15749dc9427b
  datadog_api_key: 6d3fccd2292fa567e2e335dbf09a3caa
  airbrake_project_key: 031a4832f9ff3f0ff043d95a732dda64
  airbrake_project_id: 130415

kafka-connect:
  worker_count: 8
  cpus: 4
  mem: 4096
  SVM_FINDING_EVENTS_TASKS_MAX: 32
  ISSUE_EVENTS_TASKS_MAX: 6

reporting-service:
  mem: 4096

ninjas:
  repo_url: https://aglet.packages.cloudpassage.com
  cassandra_keyspace: cloudpassage_aglet
  env:
    CP_POSTGRES_HOST: pgbouncer.marathon.mesos
    API_CPUS: 2.0
    API_MEM: 3072
    PORTAL_CPUS: 2.0
    PORTAL_MEM: 3072
    GRID_CPUS: 2.0
    GRID_MEM: 2048
    WORKER_DEFAULT_CPUS: 1.0
    WORKER_MAIL_DIGEST_ALERTS_MEM: 1024
    WORKER_MAIL_INSTANT_ALERTS_MEM: 2048
    WORKER_FIM_MEM: 16384
    WORKER_SNAPSHOT_COUNT_MEM: 1024
    WORKER_SVM_MEM: 1024
    WORKER_SCA_MEM: 1024
    WORKER_SAM_MEM: 1024
    WORKER_SVA2_MEM: 1024
    WORKER_SVA22_MEM: 2048
    WORKER_TD_MEM: 1024
    WORKER_USER_REQUESTS_SVA2_MEM: 1024
    WORKER_USER_REQUESTS_SVA22_MEM: 1024
    WORKER_FACTS_MEM: 2048
    JOB_CASSANDRA_MIGRATE_MEM: 4096
    CP_MAILER_ASSET_HOST: https://portal.aglet.cloudpassage.com
    CP_S3_AWS_FUGU_BUCKET: ng-fugu-blue
    CP_FUGU_HOST: https://fugu-blue.cloudpassage.com
    CP_CASSANDRA_KEYSPACE: cloudpassage_aglet
    CP_MIGRATION_GRID_URL: grid.aglet.cloudpassage.com
    CP_GRID_IPS: grid.aglet.cloudpassage.com
    CP_ZUORA_SERVER: https://www.zuora.com/apps/services/a/71.0
    CP_ZUORA_PRODUCTION_PLANS: 1
    CP_REPO_URL: https://aglet.packages.cloudpassage.com
    CP_CONNECTOR_REPO_URL: https://aglet.packages.cloudpassage.com/connector
    CP_LINUX_CONNECTOR_DAEMON_VERSION: 4.1.1
    CP_WINDOWS_DAEMON_VERSION: 3.7.8
    CP_LINUX_DAEMON_VERSION: 3.7.8
    CP_IMAGE_COLLECTOR_SERVICE_GRID_URL: https://containers.aglet.cloudpassage.com
    CP_ES_EVENTS_URL: http://es-events-aglet.vpg.cloudpassage.com:9200
  vips:
    api: api.aglet.cloudpassage.com
    grid: grid.aglet.cloudpassage.com
    portal: portal.aglet.cloudpassage.com
    containers: containers.aglet.cloudpassage.com
  kafka:
    topic:
      # Values must be valid JSON or it will not work!
      reload_agent_group_state: '{ "partitions": 64, "config":[ "segment.bytes=1000000","retention.ms=60000","delete.retention.ms=60000" ], "replication-factor": 3 }'
      agent_events: '{ "partitions": 128, "config":[ "segment.bytes=5000000" ], "replication-factor": 3 }'
      events_index: '{ "partitions": 128, "config":[ "segment.bytes=5000000" ], "replication-factor": 3 }'
      svm: '{ "partitions": 128, "config":[ "segment.bytes=5000000" ], "replication-factor": 3 }'
      td: '{ "partitions": 128, "config":[ "segment.bytes=5000000" ], "replication-factor": 3 }'
      sva2: '{ "partitions": 128, "config":[ "segment.bytes=5000000" ], "replication-factor": 3 }'
      sva22: '{ "partitions": 128, "config":[ "segment.bytes=5000000" ], "replication-factor": 3 }'
      fim: '{ "partitions": 128, "config":[ "segment.bytes=5000000" ], "replication-factor": 3 }'
      lids: '{ "partitions": 128, "config":[ "segment.bytes=5000000" ], "replication-factor": 3 }'
      sca: '{ "partitions": 128, "config":[ "segment.bytes=5000000" ], "replication-factor": 3 }'

      # deprecated topic, just keep it empty
      #event_count: '{ "partitions": 64, "config":[ "segment.bytes=1000","retention.ms=1000","delete.retention.ms=1000" ], "replication-factor": 3 }'


terraform_overrides:
  TF_VAR_rds_backup_count: 30
  dns_domain: "vpg.cloudpassage.com"
  TF_VAR_environment: "production"
  TF_VAR_aws_account: 232981490179
  TF_VAR_acct_prefix: 23298
  TF_VAR_jenkins_cred_bucket: jenkins-creds-cphalo-ecs-services-us-west-2-23298
  TF_VAR_cass_count: '{ us-west-2a=2, us-west-2b=2, us-west-2c=2 }'
  TF_VAR_elasticsearch_count: '{ us-west-2a=1, us-west-2b=1, us-west-2c=1 }'
  TF_VAR_elasticsearch_ebs_size: 3000
  TF_VAR_es_events_enable: 'true'
  TF_VAR_worker_slave_count: '{ us-west-2a=0, us-west-2b=0, us-west-2c=0 }'
  TF_VAR_slave_count: '{ us-west-2a=1, us-west-2b=1, us-west-2c=1 }'
  TF_VAR_public_slave_count: '{ us-west-2a=1, us-west-2b=1, us-west-2c=1 }'
  TF_VAR_public_slave_total: 3
  TF_VAR_kafka_count: '{us-west-2a=1, us-west-2b=1, us-west-2c=1 }'
  TF_VAR_kafka_instance_type: "m4.2xlarge"
  TF_VAR_kafka_ebs_size: 3000
  TF_VAR_kafka_heap: '5G'
  TF_VAR_elasticsearch_instance_type: "r4.2xlarge"
  TF_VAR_elasticsearch_master_instance_type: "m3.xlarge"
  TF_VAR_cassandra_instance_type: "i3.2xlarge"
  TF_VAR_master_instance_type: "m3.2xlarge"
  TF_VAR_public_slave_instance_type: "m4.xlarge"
  TF_VAR_slave_instance_type: "c3.8xlarge"
  TF_VAR_worker_slave_instance_type: "c3.8xlarge"
  TF_VAR_rds: '{ multi_az="true", allocated_storage="3000", apply_immediately="true", instance_type="db.m4.large", storage_type="gp2" }'
  TF_VAR_rdskong: '{ multi_az="true", allocated_storage="20", storage_type="gp2", apply_immediately="true", instance_type="db.t2.medium" }'
  TF_VAR_domain_cert: "*.vpg.cloudpassage.com"
  TF_VAR_r53_domain: "vpg.cloudpassage.com"
  TF_VAR_r53_zone_id: "Z9GT8HA5SBK4D"
  TF_VAR_es_domain_instance_type: "m4.large.elasticsearch"
  TF_VAR_zookeeper_instance_type: "m4.large"
  TF_VAR_es_domain_volume_size: 300
  TF_VAR_cass_cluster_name: "aglet cluster"
  TF_VAR_cass_internode_encryption: none
  TF_VAR_cass_suspended_processes: "Launch,Terminate,HealthCheck,ReplaceUnhealthy"
  TF_VAR_worker_slave_spot_fleet_enable: true
  TF_VAR_worker_slave_spot_fleet_target_capacity: 600
  TF_VAR_rdsmetabase_enable: true
  TF_VAR_ng_wildcard_cert: "arn:aws:acm:us-west-2:232981490179:certificate/8732beb1-7023-4373-90cc-61d152e8cc28"

  # Change this value (doesn't matter what) to trigger a new spot fleet
  # https://github.com/terraform-providers/terraform-provider-aws/issues/741
  TF_VAR_worker_slave_spot_fleet_valid_until: "2022-12-22T22:22:23Z"

  # Reporting
  TF_VAR_kafka_kinesis_topics: csm_external_identifier_events,csm_finding_events,csm_policy_events,cve_base_metric_events,cve_entry_events,cve_exception_events,cve_vulnerable_software_events,group_events,issue_events,rule_events,scan_events,server_events,svm_finding_events,user_events,firewall_policy_events
  TF_VAR_emr_enable: 'true'
  TF_VAR_kinesis_shard_default: 1
  TF_VAR_kinesis_retention_period_default: 168
  TF_VAR_rdsreporting: '{ multi_az=true, allocated_storage="100", storage_type="gp2", apply_immediately=true, instance_type="db.t2.medium" }'
  TF_VAR_consistent_view_enable: true
  TF_VAR_emr_version: "5.8.0"
  TF_VAR_emr_enable_reporting_green: true
  TF_VAR_emr_enable_reporting_blue: false
  TF_VAR_emr_report_dns_target: "green"
  TF_VAR_streaming_spark_profiles: '{ issue_events="high_throughput", scan_events="high_throughput", server_events="high_throughput", svm_finding_events="4c16g_rc2", csm_finding_events="4c16g" }'
  TF_VAR_streamingemr: '{ master="r4.xlarge", core="r4.xlarge", core_count=9 }'


  # OPS-6436: Use ondemand for prod
  TF_VAR_spot_pricing: '{ m3.medium="", m3.large="", m3.xlarge="", m3.2xlarge="", m4.xlarge="", c3.large="", c3.xlarge="", c3.2xlarge="", c3.4xlarge="", c3.8xlarge="", r3.large="", r3.xlarge="", r3.2xlarge="", r3.4xlarge="", r3.8xlarge="", i2.xlarge="", i2.2xlarge="",  i2.4xlarge="", i2.8xlarge="", d2.xlarge="", d2.2xlarge="", d2.4xlarge="", d2.8xlarge="" }'

report_scheduler:
  secrets:
    ninjas_api_key_id: AQECAHjJOEpidUQ+hfvhrRA8BpPCADL0kTSKGKoxv+/7grmV0QAAAGYwZAYJKoZIhvcNAQcGoFcwVQIBADBQBgkqhkiG9w0BBwEwHgYJYIZIAWUDBAEuMBEEDMHYRNXCrovtJJEGRQIBEIAj5In0eVxbMScdIJUaoOpQx2UX4YTL5VFfKRP43fD63Ly5y3Y=
    ninjas_api_key: AQECAHjJOEpidUQ+hfvhrRA8BpPCADL0kTSKGKoxv+/7grmV0QAAAH4wfAYJKoZIhvcNAQcGoG8wbQIBADBoBgkqhkiG9w0BBwEwHgYJYIZIAWUDBAEuMBEEDPjfFPn7s6fWDDLBKQIBEIA7MOqHe5JfGX5f5IM4zA7+h1YfWPltJoeC4zL58daNzlO5MN3m8YfZPiJ3EZ5B+nEzH91Lm37dbuASVmM=

sni_overrides:
  enabled: true

containers:
  CP_CASSANDRA_DEFAULT_CONSISTENCY: local_quorum

agent-events-collector:
  MEM: 8192

event-indexer:
  env:
    CP_ELASTICSEARCH_HOSTS: "http://es-events-aglet.vpg.cloudpassage.com:9200"

gridbot:
  permissions:
    'JenkinsBot:*':
      allowusers:
        alfonso:
        vitaliy:
        amansoor:
        vaibhav:
        theocummings:
        kuga:
        dilipangal:
        wookie:
        kishore:
        joe:
        vmanda:
        dsrgyv:
        abarkouski:
        marsel.shiriyazdanov:
        sasha:
        aardestani:
        akeller:
        trobbins:
        alim:
        bcross:
        dima:
        j:
        zvickery:
        theo:
        mandrus:
    'help':
      allowusers:
        '#aglet/*':
